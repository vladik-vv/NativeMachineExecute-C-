# NativeMachineExecute-C-

Руководство по NEM (Native Execute Machine) Beta version, буду переписывать и улучшать в свободное время, можете присоеденятся к разработке

Доказательства разработки ( видеофиксации )

Часть первая - https://youtu.be/QJMJHRKFToQ
Часть вторая - https://youtu.be/MqFbF9TOzIQ
Часть третья - https://youtu.be/k45wyTwkc3c


Смысл: Создан для геймплейной части игры zabvensk.

Основные команды

    compile файл          - собрать программу (файл писать без расширения!)
    run файл              - запустить
    hex файл              - посмотреть байты
    clear                 - очистить экран
    end                   - выйти


Режимы

    compile test.nem -h   - показать байткод после сборки


Синтаксис NEM

Регистры
Есть 8 штук: R1, R2, R3, R4, R5, R6, R7, R8

В них можно хранить только числа.

Адреса
От 0x00000 до 0x99999


В них можно хранить и числа и текст. Но адреса нельзя напрямую использовать для вычислений
Для этого обьявите их в регистр

MOV R# 0x###

Во всех инструкциях, первым пишется регистр который принимает значение. Второй, тот кто дает
Пример:
    MOV R# 15

регистр R# примит 15

Инструкции (R# - любой регистр от R1 до R8. 0x### - любой адрес от 0х000 до 0х999 )

    MOV     ; Move - Переместить
    ADD     ; Add - Добавить
    SUB     ; Subtract - Вычесть 
    DIV     ; Divide - Поделить
    MUL     ; Multiply - Умножить
    PRT     ; Print - Вывести (без перехода на след. строку)
    JMP     ; Jump - Прыгнуть ( на метку )
    IFZ     ; If Zero - Если указанное значение регистра равна нулю
    HLT     ; Halt - Остановка программы
    SWP     ; Swap - Поменять регистры местами
    BEGIN   ; Beginning - Начало метки 
    END     ; End - Конец метки 
    WAIT    ; Wait - Подождать
    NXT     ; Next - Новая строка
    INP     ; Input - Ввод 
    REM     ; Remove - Удалить элемент 
    CLS     ; Очистить экран 
    CONST   ; Дать адресу свое имя
    LIST    ; Создать список
    

Основные команды

    MOV R# 100      ; Загрузить 100 в R#
    MOV R# R#       ; Загрузить значение R# в R#
    ADD R# 100      ; R# = R# + 100
    ADD R# R#       ; R# = R# + R#
    SUB R# 50       ; R# = R# - 50
    SUB R# R#       ; R# = R# - R#
    PRT R#          ; Вывести R#
    PRT 0x00001       ; Вывести содержимое адреса 0x001 (до этого обязательно нужно обьявить адрес, об этом ниже)
    NXT             ; Переход на следующую строку
    INP R#          ; Ввести число в R#


Циклы и метки

    MOV R1 5        ; Загрузить число 5 в регистр R1
    BEGIN NAME      ; Метка NAME 
        PRT R1      ; Вывести значение регистра R1
        NXT         ; Следующая строка
        SUB R1 1    ; Вычесть из регистра R1 число 1
        IFZ R1 HLT  ; Если R1 == 0 - остановка. Можно и перейти на метку, написав название. IFZ R1 NAME 
        JMP LOOP    ; Перейти на LOOP 
    END             ; Конец метки


Память для строк

Адресам можно указывать константы для простаты, но можно и напрямую писать адреса

С константой: (более читаемый код)

    CONST text -> [0x00001]    ; Указать константу text для адреса 0x00001

    MOV [text] Введите имя:    ; Сохранить содержимое в константе text 
    PRT [text]                 ; Вывести содержимое в константе text
    INP [text]                 ; Запросить ввод и внести его в константу text
    REM [text]                 ; Очистить ячейку константы text
    REM ALL                    ; Очистить все адреса в памяти 

-------------------------------------------------------------------------------------
Без константы: 

    MOV 0x00010 Введите имя:     ; Сохранить содержимое в адресе 0x010
    PRT 0x00010                  ; Вывести содержимое в адресе 0x010
    INP 0x00100                  ; Пользователь вводит значение или текст в строку 0x100
    PRT 0x00100                  ; Вывести содержимое в адресе 0x100
    REM 0x00010                  ; Очистить ячейку 0x100
    REM ALL                    ; Очистить все адреса в памяти 


Работы с списками

    LIST numbers            ; Создать список numbers
    LIST nenumbers

    MOV numbers nenumbers   ; Заменить содержимое всего списка numbers на содержимое всего списка nenumbers

    ADD numbers 5           ; Добавить элемент 5 к списку numbers
    ADD numbers R#          ; Добавить значения регистра R# к списку numbers
    ADD numbers 0x00001     ; Добавить значения адреса к списку numbers
    или с константой
    ADD numbers [num]       ; Добавить значения адреса под константой num к списку numbers

    REM numbers 5           ; Убрать 5 из списка numbers
    REM numbers R#          ; Убрать значение регистра R# из списка numbers
    REM numbers 0x00001     ; Убрать значение адреса из списка numbers
    или с константой
    REM numbers [num]

    (элементы списка начинаются с 0)

    REM numbers [5]         ; Убрать элемент списка numbers под номером 5
    REM numbers [R#]        ; Убрать элемент списка numbers под номером значения регистра R#
    REM numbers [0x00001]   ; Убрать элемент списка numbers под номером значения адреса
    или с константой
    REM numbers [[num]]


    PRT numbers 15          ; Вывести элемент списка numbers '15'
    PRT numbers R#          ; Вывести элемент списка numbers равный значению регистра R#
    PRT numbers [num1]      ; Вывести элемент списка numbers равный значению адреса под константой num1
    PRT number 0x00001

    PRT numbers [0]         ; Вывести элемент списка numbers под номером 0 
    PRT numbers [R#]        ; Вывести элемент списка numbers под номером значения регистра R#
    PRT numbers [[num2]]    ; Вывести элемент списка numbers под номером значения адреса под константой num2 


Остальное

    MOV R# R#      ; Скопировать R# в R#
    SWP R# R#      ; Поменять R# и R# местами
    WAIT 5000      ; Пауза 5 секунд
    WAIT           ; Пауза 1 секунда
    HLT            ; Остановить программу
    CLS            ; Очистить экран





Пример программ

Простой калькулятор - easy_calc

Сложный калькулятор - hard_calc

их можно открыть любым редактором и посмотреть как выглядит код

запуск:
    compile easy_calc 
    run easy_calc

    compile hard_calc -h
    run easy_calc -ra



